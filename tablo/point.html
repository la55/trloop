<!DOCTYPE html>
<html>
<head>
    <title>Point race</title>
    <script src="vue.min.js"></script>
</head>
<style>
 body {background-color: #000; color: #fff; padding: 0; margin: 0 }
 table td {padding: 2; margin: 0 }
 input, button {font-size: 36px;  }
 .control { float: right; padding-right: 200px }
 #root { padding: 0; margin: 0 }
</style>
<body>
    <div id='root'>
	    <table>
	        <tr v-for="(p, i) in sorted">
			<td v-text="i + 1"></td>
			<td v-text="p.bib"></td>
			<td v-text="p.family"></td>
			<td v-text="p.region"></td>
			<td v-text="p.points"></td>
		</tr>
	    </table>
	<div class="control">
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<input type="text" v-model="bib" size="1" name="bib">
	<input type="text" v-model="family" size="2"  name="family">
	<input type="text" v-model="region" size="2"  name="region">
	<button @click="addBib()">Add</button>
	<br>
	<br>
	<input type="text" v-model="f1" size="1" name="f1">
	<input type="text" v-model="f2" size="1" name="f2">
	<input type="text" v-model="f3" size="1" name="f3">
	<input type="text" v-model="f4" size="1" name="f4">
	<button @click="intFinish()">Add</button>
	</div>
    </div>
<script>
  var app = new Vue({
    
    el : '#root',

    data: {
	f1: '',
	f2: '',
	f3: '',
	f4: '',
	bib: '',
	family: '',
	region: '',
	bibs: [],
    },

    computed: {
      sorted : function () {
        return this.bibs.sort((a, b) => b.points - a.points)
      }
    },

    methods: {
      getByBib: function (bib) {
	 return this.bibs.filter(p => p.bib == bib)[0]
      },
      intFinish: function () {
	 p1 = this.getByBib(parseInt(this.f1))
	 p1.points += 5
	 this.f1 = 0
	 p2 = this.getByBib(parseInt(this.f2))
	 p2.points += 3
	 this.f2 = 0
	 p3 = this.getByBib(parseInt(this.f3))
	 p3.points += 2
	 this.f3 = 0
	 p4 = this.getByBib(parseInt(this.f4))
	 p4.points += 1
	 this.f4 = 0
      },
      addBib: function () {
	this.bibs.push({ bib: this.bib, family: this.family, region: this.region, points: 0 })	
	this.bib = 0
	this.family = ''
	this.region = ''
      }
    }

  });
</script>
</body>
</html>

